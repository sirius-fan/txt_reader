# 自动章节跳转功能说明

## 🔄 新增功能：智能章节导航

PySide6 小说阅读器现已支持智能章节跳转功能！

### 📋 功能特性

#### 1. 自动章节跳转
- **滚轮导航**: 在章节末尾向下滚动自动跳转到下一章
- **键盘导航**: 支持 PageDown、Down 键在章节末尾自动跳转
- **反向跳转**: 在章节开头向上滚动或按 PageUp、Up 键跳转到上一章末尾

#### 2. 手动章节导航
- **工具栏按钮**: "上一章" 和 "下一章" 按钮
- **快捷键支持**:
  - `Ctrl+Left`: 跳转到上一章
  - `Ctrl+Right`: 跳转到下一章
  - `Ctrl+Home`: 跳转到第一章
  - `Ctrl+End`: 跳转到最后一章

#### 3. 智能定位
- **章节开头**: 跳转到下一章时自动定位到章节开头
- **章节末尾**: 跳转到上一章时自动定位到章节末尾
- **状态反馈**: 状态栏显示跳转信息

### 🎮 使用方法

#### 自动跳转（推荐）
1. **阅读到章节末尾**时：
   - 使用鼠标滚轮向下滚动 → 自动跳转到下一章开头
   - 按 `PageDown` 或 `↓` 键 → 自动跳转到下一章开头

2. **在章节开头**时：
   - 使用鼠标滚轮向上滚动 → 自动跳转到上一章末尾
   - 按 `PageUp` 或 `↑` 键 → 自动跳转到上一章末尾

#### 手动跳转
1. **工具栏按钮**: 点击 "上一章" 或 "下一章" 按钮
2. **菜单操作**: 导航菜单 → 选择章节跳转选项
3. **快捷键**:
   - `Ctrl+←`: 上一章
   - `Ctrl+→`: 下一章
   - `Ctrl+Home`: 第一章
   - `Ctrl+End`: 最后一章

### ⚙️ 技术实现

#### 事件处理机制
```python
def eventFilter(self, obj, event):
    """事件过滤器，处理滚轮和键盘事件"""
    if obj == self.text_area:
        if event.type() == event.Type.Wheel:
            return self.handle_wheel_event(event)
        elif event.type() == event.Type.KeyPress:
            return self.handle_key_event(event)
    return super().eventFilter(obj, event)
```

#### 滚动检测
- **底部检测**: `scrollbar.value() >= scrollbar.maximum()`
- **顶部检测**: `scrollbar.value() <= scrollbar.minimum()`
- **边界处理**: 自动检查是否还有上一章/下一章

#### 智能定位
- **下一章**: 自动滚动到顶部 `scrollbar.setValue(0)`
- **上一章**: 自动滚动到底部 `scrollbar.setValue(scrollbar.maximum())`

### 🔧 配置选项

#### 调试模式
- 设置 `DEBUG_MODE = True` 启用调试输出
- 可以查看章节跳转的详细日志

#### 支持的触发方式
- **滚轮**: 向上/向下滚动
- **键盘**: PageUp/PageDown, Up/Down 箭头键
- **按钮**: 工具栏导航按钮
- **快捷键**: Ctrl+方向键组合

### 📊 用户体验改进

#### 视觉反馈
- 状态栏显示跳转信息
- 章节列表自动高亮当前章节
- 下拉框自动更新当前章节

#### 操作流畅性
- 无缝章节切换，无需手动操作
- 智能边界检测，避免无效跳转
- 保持阅读连续性

### 🎯 使用场景

1. **连续阅读**: 读完一章自动跳转到下一章
2. **快速浏览**: 使用快捷键快速在章节间切换
3. **精确定位**: 跳转到特定章节（第一章/最后一章）
4. **回顾内容**: 轻松跳转到上一章查看内容

### 💡 提示

- 在章节中间位置，滚轮和键盘操作仍然是正常的文本滚动
- 只有在章节边界（开头/末尾）时才会触发自动跳转
- 可以通过章节下拉框随时跳转到任意章节
- 支持所有原有的章节导航功能

现在您可以享受更加流畅的小说阅读体验了！
